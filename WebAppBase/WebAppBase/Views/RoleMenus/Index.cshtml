@model WebAppBase.Models.RoleMenusViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Script{
    <script type="text/javascript">
        $(function () {
            $("#selRole").on("change", function () {
                $.get("@Url.Action("AjaxGetRoleMenu", "RoleMenus")"
                            , { "roleId": $(this).val() }
                            , function (data){
                                setMenuListFrom(data.MenuList);
                                setMenuListTo(data.RoleMenuList);
                            }
                        , "json");
            });
        });

        function setMenuListFrom(list) {
            $(list).each(function (index, obj) {
                var html = "";
                html += '<tr id="' + obj.MenuID + '">\r\n';
                html += '    <td>';
                html += '        <input id="' + obj.MenuID + '" type="checkbox" />\r\n';
                html += '    </td>\r\n';
                html += '    <td>\r\n';
                html += '        ' + obj.MenuName + '\r\n';
                html += '    </td>\r\n';
                html += '</tr>\r\n';
                $("#tbodyFrom").append(html);
            });
        }

        function setMenuListTo(list) {
            $(list).each(function (index, obj) {
                var html = "";
                html += '<tr id="' + obj.MenuID + '">\r\n';
                html += '    <td>';
                html += '        <input id="' + obj.MenuID + '" type="checkbox" />\r\n';
                html += '    </td>\r\n';
                html += '    <td>\r\n';
                html += '        ' + obj.MenuName + '\r\n';
                html += '    </td>\r\n';
                html += '</tr>\r\n';
                $("#tbodyTo").append(html);
            });
        }
    </script>
}
<div class="form-group">
    @Html.DropDownListFor(m => m.Role, Model.RolesSelectList, new { @id = "selRole" })
</div>
<div class="form-group">
    <div class="row">
        <div class="col-md-5">
            <table>
                <thead>
                    <tr>
                        <th>选择</th>
                        <th>功能名称</th>
                    </tr>
                </thead>
                <tbody id="tbodyFrom"></tbody>
            </table>
        </div>
        <div class="col-md-2">
            <div><button id="btnAdd" type="button">➡</button></div>
            <div><button id="btnDelete" type="button">⇦</button></div>
        </div>
        <div class="col-md-5">
            <table>
                <thead>
                    <tr>
                        <th>选择</th>
                        <th>功能名称</th>
                    </tr>
                </thead>
                <tbody id="tbodyTo"></tbody>
            </table>
        </div>
    </div>
</div>
